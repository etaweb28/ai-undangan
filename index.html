<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>AI Undangan Pernikahan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;padding:20px
}
.container{
  max-width:480px;margin:auto;
  background:#0d0d0d;border-radius:16px;
  padding:20px;box-shadow:0 15px 40px rgba(0,0,0,.6)
}
h1{text-align:center;color:#ff4d4d}
label{display:block;margin-top:12px;color:#ccc;font-size:13px}
input,textarea,select{
  width:100%;padding:12px;margin-top:6px;
  border-radius:10px;border:none;font-size:14px
}
textarea{resize:none}
button{
  width:100%;padding:14px;margin-top:16px;
  border-radius:12px;border:none;
  background:linear-gradient(135deg,#ff4d4d,#ff0000);
  color:#fff;font-size:16px;cursor:pointer
}
pre{
  background:#000;padding:12px;border-radius:10px;
  margin-top:12px;font-size:13px;white-space:pre-wrap
}
small{color:#aaa}
</style>
</head>

<body>
<div class="container">
<h1>AI Undangan Pernikahan</h1>

<label>Nama Pengantin Pria</label>
<input id="pria">

<label>Nama Pengantin Wanita</label>
<input id="wanita">

<label>Tanggal Acara (YYYY-MM-DD)</label>
<input id="tanggal">

<label>Alamat Lengkap Acara</label>
<textarea id="alamat"></textarea>

<label>Link Google Maps</label>
<input id="maps">

<label>Pilih Lagu Undangan</label>
<select id="lagu">
  <option value="musik/wedding1.mp3">üéµ You're Still The One ‚Äì Shania Twain</option>
  <option value="musik/wedding2.mp3">üéµ Pilihanku ‚Äì MALIQ & D'Essentials</option>
  <option value="musik/wedding3.mp3">üéµ Beautiful In White ‚Äì Shane Filan</option>
</select>

<label>Foto Mempelai (opsional)</label>
<input type="file" id="foto" accept="image/*">
<small>Disarankan foto persegi (1:1)</small>

<button onclick="buat()">‚ú® Buat Web Undangan</button>

<pre id="status">Siap membuat undangan‚Ä¶</pre>
</div>

<script>
const API_URL = "https://dry-mud-3b8ai-undangan-api.etaweb90.workers.dev";

function buat(){
  const p=pria.value.trim(),
        w=wanita.value.trim(),
        t=tanggal.value.trim(),
        a=alamat.value.trim(),
        m=maps.value.trim(),
        g=lagu.value,
        f=foto.files[0];

  if(!p||!w||!t||!a||!m){
    alert("Lengkapi semua data kecuali foto");
    return;
  }

  const prompt = `
Buatkan teks undangan pernikahan yang sopan, rapi, dan elegan.

Nama Pengantin Pria: ${p}
Nama Pengantin Wanita: ${w}
Tanggal Acara: ${t}
Lokasi Acara: ${a}

Gunakan Bahasa Indonesia yang baik.
Tanpa huruf kapital semua.
Format rapi dengan spasi baris.
`;

  status.innerText="‚è≥ Memproses AI‚Ä¶";

  fetch(API_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ prompt })
  })
  .then(r=>r.json())
  .then(d=>{
    localStorage.setItem("ai_text",d.result||"");
    if(f){
      const reader=new FileReader();
      reader.onload=e=>{
        localStorage.setItem("foto",e.target.result);
        lanjut(p,w,t,a,m,g);
      };
      reader.readAsDataURL(f);
    }else{
      localStorage.removeItem("foto");
      lanjut(p,w,t,a,m,g);
    }
  })
  .catch(()=>status.innerText="‚ùå Gagal terhubung ke AI");
}

function lanjut(p,w,t,a,m,g){
  location.href=
    "undangan.html"+
    "?p="+encodeURIComponent(p)+
    "&w="+encodeURIComponent(w)+
    "&t="+encodeURIComponent(t)+
    "&a="+encodeURIComponent(a)+
    "&m="+encodeURIComponent(m)+
    "&g="+encodeURIComponent(g);
}
</script>
</body>
</html>
