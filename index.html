<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>AI Undangan Online | EtaWeb</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 480px;
      margin: auto;
      background: #0d0d0d;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 15px 40px rgba(0,0,0,.6);
      animation: fadeIn 0.8s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h1 {
      text-align: center;
      color: #ff4d4d;
      margin-bottom: 5px;
    }
    p.subtitle {
      text-align: center;
      color: #ccc;
      font-size: 14px;
      margin-bottom: 15px;
    }
    input, textarea, select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 14px;
      margin-top: 10px;
    }
    textarea { resize: none; }
    button {
      width: 100%;
      padding: 14px;
      margin-top: 15px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      background: linear-gradient(135deg,#ff4d4d,#ff0000);
      color: #fff;
      cursor: pointer;
    }
    pre {
      background: #000;
      padding: 15px;
      border-radius: 12px;
      margin-top: 15px;
      font-size: 14px;
      white-space: pre-wrap;
      line-height: 1.6;
    }
    .footer {
      text-align: center;
      font-size: 12px;
      color: #888;
      margin-top: 10px;
    }
  </style>
</head>

<body>

<div class="container">
  <h1>AI Undangan Pernikahan</h1>
  <p class="subtitle">Gratis • Otomatis • Bisa jadi Web Undangan</p>

  <input id="pria" placeholder="Nama Pengantin Pria">
  <input id="wanita" placeholder="Nama Pengantin Wanita">
  <input id="tanggal" placeholder="Tanggal Acara">
  <textarea id="alamat" placeholder="Alamat Acara"></textarea>

  <input type="file" id="foto" accept="image/*">

  <label style="margin-top:10px;display:block">Pilih Lagu</label>
  <select id="lagu">
    <option value="musik/romantis1.mp3">Romantis 1</option>
    <option value="musik/romantis2.mp3">Romantis 2</option>
    <option value="musik/islami.mp3">Islami</option>
  </select>

  <button onclick="buat()">✨ Buat Web Undangan</button>

  <pre id="status">Menunggu input…</pre>

  <div class="footer">© EtaWeb AI Invitation</div>
</div>

<script>
/* ===============================
   GANTI DENGAN API WORKER KAMU
   =============================== */
const API_URL = "https://dry-mud-3b8ai-undangan-api.etaweb90.workers.dev";

function buat(){
  const p = pria.value.trim();
  const w = wanita.value.trim();
  const t = tanggal.value.trim();
  const a = alamat.value.trim();
  const g = lagu.value;
  const f = foto.files[0];

  if(!p || !w || !t || !a){
    alert("Lengkapi semua data (foto opsional)");
    return;
  }

  const prompt = `
Buatkan teks undangan pernikahan yang sopan, rapi, dan siap dibagikan.

Nama Pengantin Pria: ${p}
Nama Pengantin Wanita: ${w}
Tanggal Acara: ${t}
Lokasi Acara: ${a}

Gunakan Bahasa Indonesia yang baik.
Tanpa huruf kapital semua.
Tanpa placeholder.
Format rapi dengan spasi baris.
`;

  status.innerText = "⏳ Memproses AI…";

  fetch(API_URL,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ prompt })
  })
  .then(r => r.json())
  .then(d => {
    localStorage.setItem("ai_text", d.result || "");

    if(f){
      const reader = new FileReader();
      reader.onload = e => {
        localStorage.setItem("foto", e.target.result);
        lanjut(p,w,t,a,g);
      };
      reader.readAsDataURL(f);
    } else {
      localStorage.removeItem("foto");
      lanjut(p,w,t,a,g);
    }
  })
  .catch(()=>{
    status.innerText = "❌ Gagal terhubung ke AI";
  });
}

function lanjut(p,w,t,a,g){
  location.href =
    "undangan.html"+
    "?p="+encodeURIComponent(p)+
    "&w="+encodeURIComponent(w)+
    "&t="+encodeURIComponent(t)+
    "&a="+encodeURIComponent(a)+
    "&g="+encodeURIComponent(g);
}
</script>

</body>
</html>
